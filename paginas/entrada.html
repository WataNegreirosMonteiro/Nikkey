<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entrada | Nikkey</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen flex items-center justify-center ">
  <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md mx-4">
    <div class="flex flex-col items-center space-y-4 mb-6">
      <img src="../assets/logo-nikkey.png" alt="Nikkey 30 anos" class="h-16" />
      <h1 class="text-2xl font-semibold text-gray-900">Bem-vindo √† Nikkey</h1>
      <p class="text-gray-600 text-center text-sm">Acesse para descobrir seu elemento japon√™s</p>
    </div>

    <div class="flex bg-gray-100 rounded-lg mb-6">
      <button class="w-1/2 py-2 font-semibold text-gray-700 bg-gray-200 rounded-l-lg">Entrar</button>
      <a href="/cadastro" class="flex justify-center w-1/2 py-2 font-semibold text-gray-700 rounded-r-lg">Cadastro</a>
    </div>

    {% if not usuario %}
 
    <form method="POST" class="space-y-4">
      {% if erro %}
      <div class="rounded-md bg-red-50 text-red-700 px-3 py-2 text-sm">{{ erro }}</div>
      {% endif %}
      <div>
        <label for="email" class="block text-sm font-medium text-gray-800 mb-1">E-mail</label>
        <input id="email" name="email" type="email" placeholder="seu@email.com" required
               class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
      </div>
      <div>
        <label for="senha" class="block text-sm font-medium text-gray-800 mb-1">Senha</label>
        <input id="senha" name="senha" type="password" placeholder="********" required
               class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
      </div>
      <button type="submit" class="w-full bg-red-600 text-white font-semibold py-2 rounded-lg hover:bg-red-700 transition">Entrar</button>
      <a href="/" class="mt-2 block w-full border border-red-600 text-red-600 hover:text-white font-semibold py-2 rounded-lg hover:bg-red-600 transition text-center">Voltar para p√°gina principal</a>
    </form>
    {% else %}
    
    <div class="space-y-4">
      <p class="text-sm text-gray-600">Ol√°, <span class="font-semibold">{{ usuario.nome }}</span>. Descubra seu elemento:</p>
      <div>
        <label for="nome" class="block text-sm font-medium text-gray-800 mb-1">Seu nome ou outro nome</label>
        <input id="nome" type="text" placeholder="Digite seu nome" value="{{ usuario.nome }}"
               class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
        <p id="erro" class="hidden mt-1 text-sm text-red-600">Por favor, digite um nome.</p>
      </div>

      <button id="mostrar" class="w-full bg-red-600 text-white font-semibold py-2 rounded-lg hover:bg-red-700 transition">Mostrar frase de boas vindas</button>
      <button id="cartao" class="w-full bg-green-600 text-white font-semibold py-2 rounded-lg hover:bg-green-700 transition">Gerar cart√£o aleat√≥rio</button>

      <div id="resultado" class="hidden mt-4 p-4 border border-gray-200 rounded-lg text-center">
        <div class="text-5xl leading-none mb-2">üôá‚Äç‚ôÇÔ∏è</div>
        <p class="text-xl font-semibold"><span id="saudacao">„Åì„Çì„Å´„Å°„ÅØ</span>, <span id="nomeSpan"></span> „Åï„Çì</p>
        <p class="text-gray-600">„Çà„ÅÜ„Åì„ÅùÔºÅ (Bem-vindo!)</p>
      </div>

      <div class="flex gap-2">
        <a href="/" class="flex-1 text-center border border-gray-300 rounded-lg py-2 hover:bg-gray-50">In√≠cio</a>
        <a href="/sair" class="flex-1 text-center border border-red-600 text-red-600 rounded-lg py-2 hover:bg-red-600 hover:text-white">Sair</a>
      </div>
    </div>
    {% endif %}
  </div>

  <script>
    const input = document.getElementById('nome');
    const btn = document.getElementById('mostrar');
    const btnCartao = document.getElementById('cartao');
    const erro = document.getElementById('erro');
    const resultado = document.getElementById('resultado');
    const nomeSpan = document.getElementById('nomeSpan');

    if (btn) {
      btn.addEventListener('click', function (e) {
        e.preventDefault();
        const nome = (input.value || '').trim();
        if (!nome) {
          erro.classList.remove('hidden');
          resultado.classList.add('hidden');
          return;
        }
        erro.classList.add('hidden');
        nomeSpan.textContent = nome;
        resultado.classList.remove('hidden');
      });
    }

    if (btnCartao) {
      btnCartao.addEventListener('click', function (e) {
        e.preventDefault();
        const nome = (input.value || '').trim();
        // Se n√£o informar nome, usa o nome do usu√°rio logado no backend
        const url = nome ? ('/cartao?nome=' + encodeURIComponent(nome)) : '/cartao';
        window.location.href = url;
      });
    }
  </script>
</body>

</html>
